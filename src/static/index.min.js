(()=>{"use strict";var e={260:(e,t)=>{var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Selector=void 0,function(e){e.BOARD_GRID="board-grid",e.GRID_CELL="grid-cell",e.GRID_ROW="grid-row",e.JS_BEST_SCORE="js-best-score",e.JS_GAME_SCORE="js-game-score",e.SCORE_VALUE="score-value",e.TILE_UPDATED="tile-updated"}(s||(t.Selector=s={})),function(e){e.ANIMATION_END="animationend",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.ARROW_UP="ArrowUp",e.KEY_DOWN="keydown"}(r||(t.Event=r={}))},741:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game2024=void 0;const r=s(260);t.Game2024=class{constructor(){this.getCellValue=e=>this.gridCellList[e.x][e.y].innerText,this.gameGridEl=document.querySelector(`.${r.Selector.BOARD_GRID}`);const e=Array.from(this.gameGridEl.querySelectorAll(`.${r.Selector.GRID_ROW}`));this.gridCellList=e.map((e=>Array.from(e.querySelectorAll(`.${r.Selector.GRID_CELL}`)))),this.gameScoreEl=document.querySelector(`.${r.Selector.JS_GAME_SCORE} .${r.Selector.SCORE_VALUE}`),this.bestScoreEl=document.querySelector(`.${r.Selector.JS_BEST_SCORE} .${r.Selector.SCORE_VALUE}`),this.score=0,this.addTile(),this.addTile(),this.arrowBtnPress()}arrowBtnPress(){document.addEventListener(r.Event.KEY_DOWN,(e=>{const t=e.key;if([`${r.Event.ARROW_LEFT}`,`${r.Event.ARROW_UP}`,`${r.Event.ARROW_RIGHT}`,`${r.Event.ARROW_DOWN}`].includes(t)){const e=this.moveTiles(t);this.moveTiles(t,!1),this.updateScore(),e&&(this.addTile(),0!==this.getTiles(!0).length||this.sameAdjacentCells()||console.log("Game Over"))}}))}getTiles(e=!1){const t=[];return this.gridCellList.map(((s,r)=>{s.map(((s,i)=>{const l=s.innerText;(e&&""===l||!e&&""!==l)&&t.push({x:r,y:i})}))})),t}getNextPos(e,t,s=!0){let i,l,o,n,c,a;switch(t){case`${r.Event.ARROW_LEFT}`:i=e.y,l=-1,o=()=>i>=0,n=t=>({x:e.x,y:t});break;case`${r.Event.ARROW_UP}`:i=e.x,l=-1,o=()=>i>=0,n=t=>({x:t,y:e.y});break;case`${r.Event.ARROW_RIGHT}`:i=e.y,l=1,o=()=>i<this.gridCellList[e.x].length,n=t=>({x:e.x,y:t});break;case`${r.Event.ARROW_DOWN}`:i=e.x,l=1,o=()=>i<this.gridCellList.length,n=t=>({x:t,y:e.y})}if(o instanceof Function||n instanceof Function){for(i+=l;o();i+=l){const t=n(i);if(""!==this.getCellValue(t)){this.getCellValue(e)===this.getCellValue(t)&&s&&(a=2*parseInt(this.getCellValue(e),10),this.score+=a,c=t,this.toggleTile(t,0));break}a=parseInt(this.getCellValue(e),10),c=t}return[c,a]}}moveTiles(e,t=!0){return([`${r.Event.ARROW_RIGHT}`,`${r.Event.ARROW_DOWN}`].includes(e)?this.getTiles().reverse():this.getTiles()).map((s=>{const r=this.getNextPos(s,e,t);if(r instanceof Array){const e=r[0];if(void 0!==e)return this.toggleTile(e,r[1]),this.toggleTile(s,0),!0}return!1})).reduce(((e,t)=>t||e),!1)}toggleTile(e,t){const s=this.gridCellList[e.x][e.y];0!==t?(s.classList.add("tile-"+t),s.classList.add(`${r.Selector.TILE_UPDATED}`),s.innerText=`${t}`,s.addEventListener(r.Event.ANIMATION_END,(()=>{s.classList.remove(`${r.Selector.TILE_UPDATED}`)}))):(s.classList.remove(...[...s.classList].slice(1)),s.innerText="")}addTile(){const e=this.getTiles(!0),t=e[Math.floor(Math.random()*e.length+1)-1];void 0!==t&&this.toggleTile(t,2)}sameAdjacentCells(){return this.gridCellList.some(((e,t)=>e.some(((e,s)=>{const r=e.innerText;return[[1,0],[0,1]].some((e=>{const i={x:t+e[0],y:s+e[1]};return i.x<this.gridCellList.length&&i.y<this.gridCellList[t].length&&r===this.getCellValue(i)}))}))))}updateScore(){this.gameScoreEl.innerHTML=`${this.score}`,this.bestScoreEl.innerHTML=`${this.score}`}}}},t={};new(function s(r){var i=t[r];if(void 0!==i)return i.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,s),l.exports}(741).Game2024)})();